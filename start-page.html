<!DOCTYPE HTML>
<html>
  <head>
	<meta charset="utf-8" />
    <style>
		body {
			margin: 0px;
			padding: 0px;
		}
		#all {
			position:relative;
		}
		#container {
			position:absolute;
			z-index:2;
		}
		#test {
			position:absolute;
			z-index:3;
		}
		#progress {
			margin-top:620px;
		}
    </style>
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
	<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
	<link rel="stylesheet" href="/resources/demos/style.css" />
	<script>
	</script>

  </head>
  <body>
  <p>Mouse is at coordinates: <span></span>.</p>
	<div id="all">
		<div id="container"></div>
	</div>
	<div id="progress"></div>
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.7.2.min.js"></script>
    <script defer="defer">
	var buttonSound = new Audio('audios/button.mp3');
	var clickSound = new Audio('audios/click.mp3');
	$(document).ready(function(){
		
		$('#container').mousemove(function(event){
			$("span").text(event.pageX + ", " + event.pageY + "New.zindex is " + yoda.getZIndex());
			if (event.pageX >= 358 && event.pageX <= 623 && event.pageY >= 422 && event.pageY <= 492) {
				// About us page
				aboutUs.moveToTop();
				topimage="aboutUs";
				stage.draw();
			}
			if (event.pageX >= 330 && event.pageX <= 646 && event.pageY >= 326 && event.pageY <= 395) {
				// New game page
				yoda.moveToTop();
				topimage="yoda";
				stage.draw();
			}
			if (event.pageX >= 373 && event.pageX <= 606 && event.pageY >= 512 && event.pageY <= 579) {
				// Option game page
				
				option.moveToTop();
				topimage="option";
				stage.draw();
			}
		});
		$(document).click(function(event){
			if (event.pageX >= 330 && event.pageX <= 646 && event.pageY >= 326 && event.pageY <= 395) {
				window.location.href = "battle.html";
			}
		});
	});

	var topimage = "yoda";	// Variable that indicates the page on the top.
	window.addEventListener('keyup', function(e) {
		switch (e.keyCode) {
			case 38:{
				buttonSound.play();
				if(topimage=="aboutUs"){
					yoda.moveToTop();				
					topimage="yoda";
					stage.draw();
				}		
				else if(topimage=="option"){
					aboutUs.moveToTop();
					topimage="aboutUs";
					stage.draw();
				}
				else if(topimage=="yoda"){
					option.moveToTop();
					topimage="option";
					stage.draw();
				}					
				break;						
			}
			case 40:{
				buttonSound.play();
				if(topimage=="aboutUs"){
					option.moveToTop();
					topimage="option";
					stage.draw();
				}		
				else if(topimage=="yoda"){ 
					buttonSound.play();
					aboutUs.moveToTop();
					topimage="aboutUs"; 
					stage.draw(); 
				}
				else if(topimage=="option"){
					yoda.moveToTop();
					topimage="yoda";
					stage.draw();
				}
				break;			
			}
			case 13:{
				if(topimage=="yoda")
					window.location.href = "battle.html";
			}
		}						
	});

		
	var stage = new Kinetic.Stage({
		container: 'container',
		width: 960,
		height: 600
	});
	var layer = new Kinetic.Layer();

      
	  
	var aboutUsObj = new Image();
	aboutUsObj.src = "pictures/aboutus.jpg";
	var aboutUs = new Kinetic.Image({
		x: 0,
		y: 0,
		image: aboutUsObj,
		width: 960,
		height: 600
	});
	layer.add(aboutUs);
	
	
	var optionObj = new Image();
	optionObj.src = "pictures/options.jpg";
	var option = new Kinetic.Image({
		x: 0,
		y: 0,
		image: optionObj,
		width: 960,
		height: 600
	});
	layer.add(option);
	
	var imageObj = new Image();
	imageObj.src = "pictures/newgame.jpg";
	var yoda = new Kinetic.Image({
	  x: 0,
	  y: 0,
	  image: imageObj,
	  width: 960,
	  height: 600,
	  opacity: 1
	});
	// add the shape to the layer
	layer.add(yoda);
	var mouseLayer = new Kinetic.Layer();
	stage.add(mouseLayer);
	
	// Variables to play sound
	var newGame = new Kinetic.Rect({
		x: 335,
		y: 275,
		width: 308,
		height: 70,
	});
	newGame.on('mouseover', function() {
		buttonSound.play();
    });
	newGame.on('mousedown', function() {
		clickSound.play();
	});
	mouseLayer.add(newGame);
	
	var us = new Kinetic.Rect({
		x: 360,
		y: 372,
		width: 250,
		height: 70,
	});
	us.on('mouseover', function() {
		buttonSound.play();
	});
	mouseLayer.add(us);
	
	var op = new Kinetic.Rect({
		x: 370,
		y: 460,
		width: 230,
		height: 70,
	});
	op.on('mouseover', function() {
		buttonSound.play();
	});
	mouseLayer.add(op);
	stage.add(layer);
	stage.add(mouseLayer);
	
	// When loaded the page, draw the stage immediately
	window.onload = function() {
		var start = Date.now();
		$( "#progress" ).progressbar({
			value: Date.now() - start
		});
		stage.draw();
	};

    </script>
	
  </body>
</html>